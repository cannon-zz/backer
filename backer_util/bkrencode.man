.\" Copyright (c) 2001 Kipp Cannon (kcannon@users.sourceforge.net)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.TH BKRENCODE 8 "August 15, 2001" "Linux" "Backer"
.SH NAME
bkrencode \- Backer tape data processor.
.SH SYNOPSIS
\fBbkrencode\fP [\fB\-D\fP \fBh\fP|\fBl\fP] [\fB\-F\fP \fBe\fP|\fBs\fP]
[\fB\-V\fP \fBn\fP|\fBp\fP] [\fB\-f\fP [\fIdevname\fP]] [\fB\-h\fP]
[\fB\-s\fP] [\fB\-u\fP]
.SH DESCRIPTION
\fBbkrencode\fP is a user space implementation of the
.IR backer (4)
device driver's data processing functions.  It is a filter that reads data
from standard in and writes it to standard out.  It can either accept file
data and encode it into a byte stream suitable for being written directly
to tape or accept a raw byte stream recovered from tape and decode the file
data out of it.  The default is to encode file data to tape data.
.PP
There are two primary uses for \fBbkrencode\fP.  The first is to allow
slower systems to make full use of a Backer's high density modes by
removing the need to process the tape data stream in real time.  Tape data
can be prepared on disk ahead of time with \fBbkrencode\fP, then dumped to
tape via a raw device.  To read a tape, the process is reversed.  This, of
course, requires enough free disk space to be available to act as a buffer.
The other use of \fBbkrencode\fP is to allow tapes recorded with older
versions of the device driver to be recovered when the current version of
the driver cannot read the older format.  All that is required is a version
of \fBbkrencode\fP compiled from the sources of the older driver.
.PP
It is necessary to tell \fBbkrencode\fP what format to use when encoding a
tape data stream and, likewise, the format the data stream is in when it's
being decoded.  If the mode is not specified on the command line then the
compiled-in default mode, \fBDEFAULT_MODE\fP, is used.  It is possible for
\fBbkrencode\fP to automatically retrieve the format to use from a Backer
device file.  This is done with the \fB\-f\fP option followed, if
necessary, with the name of the device to use.  The format retrieval
operation is safe to perform at any time:  it will not interfere with any
transfer.
.SS OPTIONS
.TP
\fB\-D\fP \fBh\fP|\fBl\fP
Set the density to format the data for to high (\fBh\fP) or low (\fBl\fP).
.TP
\fB\-F\fP \fBe\fP|\fBs\fP
Set the tape speed to format the data for to EP (\fBe\fP) or SP (\fBs\fP).
.TP
\fB\-V\fP \fBn\fP|\fBp\fP
Set the video mode to format the data for to NTSC (\fBn\fP) or PAL
(\fBp\fP).
.TP
\fB\-f\fP [\fIdevname\fP]
Retrieve the mode to use from a Backer device file.  If \fIdevname\fP is
provided then that file is used, otherwise the mode is retrieved from
\fBDEVICE_NAME\fP.
.TP
\fB\-h\fP
Print a usage message.
.TP
\fB\-s\fP
Skip over bad sectors instead of aborting.
.TP
\fB\-u\fP
``Unencode''.  Extract file data from a tape data stream.
.SH EXAMPLES
To save a file in short play high density NTSC mode using
\fBbkrencode\fP to process the data, type
.RS 3
.sp
bkrencode -V n -D h -S s < \fIfilename\fP > /dev/backer/0/nhr
.sp
.RE
and to retrieve it type
.RS 3
.sp
bkrencode -u -V n -D h -S s < /dev/backer/0/nhr > \fIfilename\fP
.sp
.RE
To use \fBbkrencode\fP to allow
.IR tar (1)
to be used with high compression on a slow computer do something like
.RS 3
.sp
tar -czO \fIfiles...\fP | bkrencode \fIoptions...\fP > /tmp/tape.dat
.br
cp /tmp/tape.dat /dev/backer/0/\fIdevice\fP
.sp
.RE
.SH NOTES
It is essential that \fBbkrencode\fP be set to a format appropriate for the
mode used to transfer the data to/from tape.  If, for example,
\fBbkrencode\fP is told to produce a PAL compatible data stream which is
then written to tape via an NTSC device file the resulting recording will
be irrecoverable.
.SH "SEE ALSO"
.IR backer (4),
.IR bkrcheck (8),
.IR bkrenhanced (8),
.IR bkrmonitor (8)
.SH AUTHOR
Kipp Cannon (kcannon@users.sourceforge.net).
.SH AVAILABILITY
The most recent version of the driver and utilities can be found on
SourceForge at:
.RS
.sp
http://www.sourceforge.net/projects/linbacker
.sp
.RE
.TE
