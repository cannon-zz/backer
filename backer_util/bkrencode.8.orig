.\" Copyright (c) 2001 Kipp Cannon (kcannon@users.sourceforge.net)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.TH bkrencode 8 "March 21, 2001" "Linux" "Backer"
.SH NAME
bkrencode \- Backer tape data processor.
.SH SYNOPSIS
\fBbkrencode\fP [\fB\-h\fP] [\fB\-u\fP] [\fB\-V\fP n|p] [\fB\-D\fP h|l]
[\fB\-F\fP e|s] [\fB\-a\fP] [\fB\-f\fP \fIdevname\fP]
.SH DESCRIPTION
\fBbkrencode\fP is a user space implementation of the
.IR backer (4)
device driver's data processing functions.  It is a filter that reads data
from standard in and writes it to standard out.  It can either accept file
data and encode it into a byte stream suitable for being written directly
to tape or accept a raw byte stream recovered from tape and decode the file
data out of it.  The default is to encode file data to tape data.
.PP
There are two primary uses for \fBbkrencode\fP.  The first is to allow
slower systems to make full use of a Backer's high density modes by
removing the need to process the tape data stream in real time.  Tape data
can be prepared on disk ahead of time with \fBbkrencode\fP, then dumped to
tape via a raw device.  To read a tape, the process is reversed.  This, of
course, requires enough free disk space to be available to act as a buffer.
The other use of \fBbkrencode\fP is to allow tapes recorded with older
versions of the device driver to be recovered when the current version of
the driver cannot read the older format.  All that is required is a version
of \fBbkrencode\fP compiled from the sources of the older driver.
.PP
It is necessary to tell \fBbkrencode\fP what format to use when encoding a
tape data stream and, likewise, the format the data stream is in when it's
being decoded.  If the mode is not specified on the command line then the
compiled-in default mode is used.  It is possible for \fBbkrencode\fP to
automatically retrieve the format to use from a device file.  This is done
with the \fB\-a\fP option combined, if necessary, with the \fB\-f\fP option
and can be done whether or not the device is actually in use for a transfer
at the time.
.SS OPTIONS
.TP
\fB\-h\fP
Print a usage message.
.TP
\fB\-u\fP
"Unencode".  Extract file data from a tape data stream.
.TP
\fB\-V\fP [np]
Set the video mode to format the data for to NTSC (n) or PAL (p).
.TP
\fB\-D\fP [hl]
Set the density to format the data for to high (h) or low (l).
.TP
\fB\-F\fP [es]
Set the tape speed to format the data for to EP (e) or SP (s).
.TP
\fB\-a\fP
Automatically retrieve the mode to use from a Backer device file.
.TP
\fB\-f\fP \fIdevname\fP
When automatically retrieving the desired mode, retrieve it from
\fIdevname\fP.  If this option is not given then the mode is retrieved from
\fBDEVICE_NAME\fP.
.SH EXAMPLES
To save a file in short play high density NTSC mode using
\fBbkrencode\fP to process the data type
.RS 3
.sp
bkrencode -V n -D h -S s < \fIfilename\fP > /dev/backer/0/nhr
.sp
.RE
and to retrieve it type
.RS 3
.sp
bkrencode -u -V n -D h -S s < /dev/backer/0/nhr > \fIfilename\fP
.sp
.RE
To use \fBbkrencode\fP to allow
.IR tar (1)
to be used with high compression on a slow computer do something like
.RS 3
.sp
tar -czO \fIfilenames...\fP | bkrencode > /tmp/tape.dat
.br
cat /tmp/tape.dat > /dev/backer/0/\fIdevice\fP
.sp
.RE
.SH NOTES
It is essential that \fBbkrencode\fP be set to a format appropriate for the
mode used to transfer the data to/from tape.  If, for example,
\fBbkrencode\fP is told to produce a PAL compatible data stream which is
then written to tape via an NTSC device file the resulting recording will
be irrecoverable.
.SH "SEE ALSO"
.IR backer (4),
.IR bkrcheck (8),
.IR bkrmonitor (8)
.SH AUTHOR
Kipp Cannon (kcannon@users.sourceforge.net).
.SH AVAILABILITY
The most recent version of the driver and utilities can be found on
SourceForge at:
.RS
.sp
http://www.sourceforge.net/projects/linbacker
.sp
.RE
.TE
